# qBittorrent 表格增强器

[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/leeguooooo/qbittorrent-table-enhancer/blob/main/LICENSE)
[![GitHub stars](https://img.shields.io/github/stars/leeguooooo/qbittorrent-table-enhancer.svg)](https://github.com/leeguooooo/qbittorrent-table-enhancer/stargazers)
[![GitHub issues](https://img.shields.io/github/issues/leeguooooo/qbittorrent-table-enhancer.svg)](https://github.com/leeguooooo/qbittorrent-table-enhancer/issues)

一个用于增强 qBittorrent Web 界面的用户脚本，通过可视化控制面板轻松显示/隐藏表格中的隐藏列，让你更好地管理和监控种子下载信息。

## ✨ 功能特性

### 🎛️ 可视化控制面板
- **拖拽式界面**：可自由移动到屏幕任意位置
- **折叠/展开**：节省屏幕空间，需要时快速展开
- **暗色主题**：与 qBittorrent 原生界面完美融合
- **实时预览**：勾选即时生效，立即看到效果
- **分区管理**：隐藏列、显示列、数据过滤器独立管理

### 📊 完整的列显示控制

#### 🔍 隐藏列支持（显示更多信息）
脚本支持显示 qBittorrent 中的 **22个隐藏列**：

| 列名 | 描述 | 用途 |
|------|------|------|
| # | 优先级 | 种子下载优先级 |
| 总大小 | 种子文件的总大小 | 查看完整文件大小 |
| 完成于 | 种子完成时间 | 追踪下载完成历史 |
| Tracker | Tracker 服务器 | 查看种子来源 |
| 下载限制 | 下载速度限制 | 监控下载限速设置 |
| 上传限制 | 上传速度限制 | 监控上传限速设置 |
| 已下载 | 总下载量 | 查看累计下载数据 |
| 已上传 | 总上传量 | 查看累计上传数据 |
| 本次会话下载 | 本次会话下载量 | 本次启动后的下载量 |
| 本次会话上传 | 本次会话上传量 | 本次启动后的上传量 |
| 剩余 | 剩余下载量 | 还需下载的数据量 |
| 有效时间 | 种子活跃时间 | 种子运行总时长 |
| 保存路径 | 文件保存路径 | 查看文件存储位置 |
| 完成 | 已完成大小 | 已完成的数据量 |
| 比率限制 | 最大分享比率 | 自动停止上传的比率 |
| 最后完整可见 | 最后一次看到完整种子的时间 | 种子健康度指标 |
| 最后活动 | 最后活动时间 | 最后一次数据传输时间 |
| 可用性 | 种子可用性 | 种子的完整性指标 |
| 保存路径不完整 | 下载时的临时路径 | 下载中的临时存储位置 |
| 信息哈希值 v1 | BitTorrent v1 哈希值 | 种子的唯一标识符 |
| 信息哈希值 v2 | BitTorrent v2 哈希值 | 新版本种子标识符 |
| 下次重新汇报 | 下次向 Tracker 汇报的时间 | Tracker 通信时间表 |

#### 👁️ 显示列控制（隐藏不需要的）
支持隐藏当前显示的 **16个标准列**，让界面更简洁：

| 列名 | 描述 | 适合隐藏的场景 |
|------|------|----------------|
| 状态图标 | 种子状态图标 | 习惯看文字状态的用户 |
| 名称 | 种子名称 | ⚠️ 不建议隐藏 |
| 选定大小 | 选择下载的文件大小 | 更关注总大小的用户 |
| 进度 | 下载进度条 | 只关心完成状态的用户 |
| 状态 | 当前状态文字 | 更喜欢看图标的用户 |
| 种子 | 种子数量 | 不关心健康度的用户 |
| 用户 | 下载用户数量 | 不关心健康度的用户 |
| 下载速度 | 当前下载速度 | 种子已完成的用户 |
| 上传速度 | 当前上传速度 | 不关心上传的用户 |
| 剩余时间 | 预计完成时间 | 不急于了解时间的用户 |
| 比率 | 分享比率 | 新手用户 |
| 流行度 | 种子流行度 | 不关心热度的用户 |
| 分类 | 种子分类 | 分类较少的用户 |
| 标签 | 种子标签 | 不使用标签功能的用户 |
| 添加于 | 添加时间 | 不关心添加历史的用户 |
| 私密 | 是否为私有种子 | 只用公共tracker的用户 |

### 🔍 强大的数据过滤功能
- **智能过滤**：支持6种过滤类型和2种过滤模式
- **实时生效**：添加过滤器后立即隐藏/显示对应行
- **多重过滤**：可同时应用多个过滤条件
- **模糊匹配**：支持部分匹配，大小写不敏感

#### 过滤类型
| 类型 | 说明 | 使用示例 |
|------|------|----------|
| 保存路径 | 根据文件保存路径过滤 | 排除 `/volume2/video2` 路径 |
| 名称 | 根据种子名称过滤 | 仅显示包含 "电影" 的种子 |
| 分类 | 根据种子分类过滤 | 排除 "软件" 分类 |
| 标签 | 根据种子标签过滤 | 仅显示 "高清" 标签 |
| 状态 | 根据下载状态过滤 | 排除 "已停止" 状态 |
| Tracker | 根据Tracker服务器过滤 | 仅显示特定站点种子 |

#### 过滤模式
- **排除模式**：隐藏包含指定内容的行
- **仅显示模式**：只显示包含指定内容的行

### 🎯 批量操作
- **隐藏列**：显示所有/隐藏所有隐藏列
- **显示列**：显示所有/隐藏所有显示列  
- **过滤器**：一键清除所有过滤条件
- **单独控制**：每个列和过滤器都可以独立管理

### ⌨️ 快捷键支持
- **Ctrl+Shift+Q**：快速打开/关闭控制面板
- **Ctrl+Shift+D**：显示调试信息（用于问题诊断）
- **回车键**：在过滤器输入框中快速添加过滤条件

## 🚀 安装步骤

### 1. 安装用户脚本管理器
选择以下任一管理器：
- **推荐**：[Tampermonkey](https://www.tampermonkey.net/) - 支持 Chrome、Firefox、Safari、Edge
- [Violentmonkey](https://violentmonkey.github.io/) - 开源替代方案
- [Greasemonkey](https://www.greasespot.net/) - Firefox 专用

### 2. 安装脚本
有两种安装方式：

#### 方式一：直接安装（推荐）
1. 点击以下链接直接安装：
   ```
   https://github.com/leeguooooo/qbittorrent-table-enhancer/raw/main/src/qbittorrent-table-enhancer.user.js
   ```
2. 用户脚本管理器会自动检测并询问是否安装
3. 点击"安装"确认

#### 方式二：手动安装
1. 下载 [`qbittorrent-table-enhancer.user.js`](src/qbittorrent-table-enhancer.user.js) 文件
2. 打开用户脚本管理器的管理面板
3. 点击"添加新脚本"或"+"按钮
4. 将文件内容复制粘贴到编辑器中
5. 保存脚本

## 📖 使用方法

### 基本使用
1. **自动启动**：访问 qBittorrent Web 界面，脚本会自动运行
2. **查看通知**：页面顶部会显示"qBittorrent表格增强器已启用！"的绿色通知
3. **打开控制面板**：按 `Ctrl+Shift+Q` 快捷键

### 控制面板操作

#### 🔍 隐藏列管理（显示更多信息）
1. **单列控制**：勾选想要显示的隐藏列
2. **批量操作**：
   - 点击"显示所有"显示所有22个隐藏列
   - 点击"隐藏所有"隐藏所有额外列

#### 👁️ 显示列管理（隐藏不需要的）  
1. **单列控制**：取消勾选想要隐藏的显示列
2. **批量操作**：
   - 点击"显示所有"恢复所有标准列
   - 点击"隐藏所有"隐藏所有标准列（⚠️慎用）

#### 🔍 数据过滤器
1. **添加过滤器**：
   - 选择过滤类型（保存路径、名称等）
   - 选择过滤模式（排除/仅显示）
   - 输入过滤值，点击"添加"或按回车键
2. **管理过滤器**：
   - 活跃过滤器会显示在列表中
   - 点击过滤器旁的"×"按钮删除
   - 点击"清除所有"删除所有过滤器
3. **过滤状态**：实时显示过滤器数量和隐藏行数

#### 🎛️ 面板管理
- **移动**：拖拽标题栏移动面板位置
- **折叠**：点击"折叠"按钮最小化面板
- **关闭**：点击"×"按钮关闭面板

### 💡 使用场景示例

#### 简洁模式
- 隐藏：种子数、用户数、流行度、标签
- 保留：名称、状态、进度、速度
- 适合：日常监控下载进度

#### 管理模式  
- 显示：保存路径、分类、标签、添加时间
- 过滤：排除特定路径或分类
- 适合：整理和管理种子库

#### 监控模式
- 显示：所有速度、比率、时间相关列
- 过滤：仅显示活跃下载
- 适合：性能监控和优化

### 故障排除
如果遇到问题：
1. 按 `Ctrl+Shift+D` 查看调试信息
2. 打开浏览器控制台查看详细日志
3. 刷新页面重新加载脚本

## 🛠️ 技术细节

### 兼容性
- **qBittorrent**：支持所有现代版本的 qBittorrent Web UI
- **浏览器**：Chrome、Firefox、Safari、Edge 等现代浏览器
- **脚本管理器**：Tampermonkey、Violentmonkey、Greasemonkey

### 工作原理
1. **自动检测**：脚本检测页面是否为 qBittorrent Web 界面
2. **DOM 监控**：监控页面动态变化，确保在表格重新加载后仍然有效
3. **双重处理**：
   - 通过 CSS 类名控制表头显示
   - 通过列索引控制数据行显示
4. **状态同步**：控制面板状态与实际列显示状态实时同步

### 项目结构
```
qbittorrent-table-enhancer/
├── src/
│   └── qbittorrent-table-enhancer.user.js  # 主脚本文件
├── assets/                                  # 资源文件（图片等）
├── docs/                                   # 文档目录
├── package.json                            # 项目配置
└── README.md                               # 说明文档
```

## 🔧 开发与贡献

### 本地开发
1. Clone 项目：
   ```bash
   git clone https://github.com/leeguooooo/qbittorrent-table-enhancer.git
   cd qbittorrent-table-enhancer
   ```

2. 编辑脚本文件：
   ```bash
   # 编辑主脚本
   vim src/qbittorrent-table-enhancer.user.js
   ```

3. 测试脚本：
   - 在用户脚本管理器中导入修改后的脚本
   - 在 qBittorrent Web 界面中测试功能

### 贡献指南
欢迎提交 Issue 和 Pull Request！

1. **报告问题**：在 [Issues](https://github.com/leeguooooo/qbittorrent-table-enhancer/issues) 页面描述遇到的问题
2. **功能建议**：在 Issues 中提出新功能建议
3. **代码贡献**：
   - Fork 项目
   - 创建功能分支
   - 提交更改
   - 发起 Pull Request

## 📝 更新日志

### v1.3.0 (2025-01-22) - 显示列控制
- ✨ **新功能**：支持隐藏当前显示的16个标准列
- 🎛️ **界面重设**：分离隐藏列和显示列管理区域
- 🔄 **双向控制**：既能显示隐藏列，也能隐藏显示列
- 📊 **完整定义**：新增16个显示列的详细说明和建议
- 🎯 **批量操作**：分别的显示所有/隐藏所有按钮
- 💡 **使用建议**：针对不同场景的列显示建议

### v1.2.0 (2025-01-22) - 数据过滤功能
- 🔍 **过滤器系统**：支持6种过滤类型和2种过滤模式
- 📝 **智能匹配**：模糊匹配、大小写不敏感
- 🎯 **实时生效**：添加过滤器立即隐藏/显示对应行
- 📊 **状态显示**：实时统计过滤器数量和隐藏行数
- ⌨️ **快捷操作**：回车键快速添加过滤条件
- 🔄 **动态更新**：表格内容更新时自动重新应用过滤器

### v1.1.0 (2025-01-22) - 基础功能完善
- ✅ 完整实现22个隐藏列的显示控制
- ✅ 添加可拖拽的控制面板界面
- ✅ 支持快捷键操作
- ✅ 修复表格内容显示问题
- ✅ 改进列索引处理逻辑
- ✅ 添加调试功能

### v1.0.0 (2025-01-22) - 初始版本
- 🎉 初始版本发布
- ✅ 基础表格增强功能

## 📄 许可证

本项目采用 [MIT 许可证](LICENSE)。

## 🙏 致谢

感谢所有为此项目做出贡献的开发者和用户！

---

如果这个项目对你有帮助，请给个 ⭐ Star 支持一下！

有问题或建议？欢迎在 [Issues](https://github.com/leeguooooo/qbittorrent-table-enhancer/issues) 中反馈。